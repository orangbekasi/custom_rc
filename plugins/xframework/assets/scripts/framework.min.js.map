{"version":3,"sources":["framework.js"],"names":[],"mappings":"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","file":"framework.min.js","sourcesContent":["/**\n * Roundcube Plus Framework plugin.\n *\n * Copyright 2016, Tecorama LLC.\n *\n * @license Commercial. See the LICENSE file for details.\n */\n\nlet x = console.log.bind(console);\nlet xsidebar;\n\n$(document).ready(function() {\n    xframework.initialize();\n    xsidebar = rcmail.env.xelastic ? new xsidebarElastic() : new xsidebarLarry();\n    xsidebar.initialize();\n});\n\n// close xframework popups when clicked on document\n$(document).on(\"mousedown\", function() {\n    $(\".xpopup\").hide();\n    xframework.hidePopovers();\n});\n\nlet xframework = new function() {\n    this.language = rcmail.env.locale.substr(0, 2);\n\n    /**\n     * Initializes the framework.\n     *\n     * @returns {undefined}\n     */\n    this.initialize = function() {\n        // enable loading a settings section by using the _section url parameter\n        if ($(\"#sections-table\").length) {\n            setTimeout(function() { $(\"#rcmrow\" + xframework.getUrlParameter(\"_section\")).mousedown(); }, 0);\n        }\n\n        // add the apps menu\n        if (typeof rcmail.env.appsMenu !== \"undefined\" && rcmail.env.appsMenu) {\n            if (rcmail.env.xelastic) {\n                $(\"#show-mobile-xsidebar\").before($(rcmail.env.appsMenu));\n                UI.popup_init(document.getElementById('button-apps'));\n            } else {\n                $(\".button-settings\").after($(rcmail.env.appsMenu));\n            }\n            rcmail.env.appsMenu = false;\n        }\n\n        const showSidebar = $(\"#show-xsidebar\");\n        if (rcmail.env.xelastic && showSidebar.length) {\n            showSidebar.parent(\"li\").attr(\"id\", \"show-xsidebar-item\");\n        }\n\n        // in firefox the popup window will disappear on select's mouse up - fix it\n        $(\"#quick-language-change select\").on(\"mouseup\", function(event) { event.stopPropagation(); });\n\n        // send csrf token\n        if (rcmail.env.set_token !== undefined) {\n            setTimeout(function() { $.ajax({ url: rcmail.url('set-token'),\n                headers: {'x-csrf-token': rcmail.env.request_token} }); }, 1500);\n        }\n\n        // stop clicks on sidebar settings icons from collapsing the sidebar boxes and redirect to the specified\n        // settings (not using a link so we don't have to restyle all these links in the skins\n        $(\"span.sidebar-settings-url\").on(\"click\", function(event) {\n            event.stopPropagation();\n            window.location = $(event.target).data(\"url\");\n        });\n\n        // set up the settings sidebar item sorting\n        if ($(\"#xsidebar-order\").length) {\n            $(\"table.propform\").attr(\"id\", \"xsidebar-order-table\");\n            // move the hidden input out of the row and remove the row so it's not draggable\n            const orderTable = $(\"#xsidebar-order-table\");\n            orderTable.after(\"#xsidebar-order\");\n            orderTable.after(\"#xsidebar-order-note\");\n            orderTable.find(\"tr:last-child\").remove();\n\n            $('#xsidebar-order-table tbody').sortable({\n                delay: 100,\n                distance: 10,\n                placeholder: \"placeholder\",\n                stop: function () {\n                    let order = [];\n                    $(\"#xsidebar-order-table input[type=checkbox]\").each(function() {\n                        order.push($(this).attr(\"data-name\"));\n                    });\n                    $(\"#xsidebar-order\").val(order.join(\",\"));\n                }\n            });\n        }\n\n        if (xframework.isCpanel()) {\n            $(\"body\").addClass(\"cpanel\");\n        }\n\n        // selects in elastic don't show normally but are modified to show as a popover box, so if a select in a popover\n        // box will close its parent box in order to show its children. To prevent this, we unbind all its events, show\n        // it's children normally and prevent propagation to prevent closing the parent popover\n        if ($(\"body.xelastic\").length) {\n            $(\"#button-apps\").on(\"mouseup\", function() {\n                setTimeout(function() {\n                    $(\".popover .popover-body select:not(.xreverted)\")\n                        .off(\"mousedown keydown change\")\n                        .on(\"mousedown click\", function (event) { event.stopPropagation(); })\n                        .addClass(\"xreverted\");\n                }, 300);\n            });\n        }\n    };\n\n    /**\n     * Reloads the page adding the language url parameter: triggered by the quick language change select.\n     *\n     * @returns {undefined}\n     */\n    this.quickLanguageChange = function() {\n        const language = $(\"#quick-language-change select\").val();\n        language && (location.href = xframework.replaceUrlParam(\"language\", language));\n    };\n\n    /**\n     * Returns the user timezone offset in seconds as specified in the user settings.\n     *\n     * @returns {int}\n     */\n    this.getTimezoneOffset = function() {\n        return rcmail.env.timezoneOffset;\n    };\n\n    /**\n     * Returns the user date format as specified in user settings converted into the specified format type.\n     *\n     * @param {string} type (php, moment, datepicker)\n     * @returns {string}\n     */\n    this.getDateFormat = function(type) {\n        return rcmail.env.dateFormats[type === undefined ? \"moment\" : type];\n    };\n\n    /**\n     * Returns the user time format as specified in user settings converted into the specified format type.\n     *\n     * @param {string} type (php, moment, datepicker)\n     * @returns {string}\n     */\n    this.getTimeFormat = function(type) {\n        return rcmail.env.timeFormats[type === undefined ? \"moment\" : type];\n    };\n\n    /**\n     * Returns the user date and time format as specified in user settings converted into the specified format type.\n     *\n     * @param {string} type (php, moment, datepicker)\n     * @returns {string}\n     */\n    this.getDateTimeFormat = function(type) {\n        return rcmail.env.dateFormats[type === undefined ? \"moment\" : type] + \" \" +\n            rcmail.env.timeFormats[type === undefined ? \"moment\" : type];\n    };\n\n    /**\n     * Returns the user format of the day/month only, converted into the specified format type.\n     *\n     * @param {string} type (php, moment, datepicker)\n     * @returns {string}\n     */\n    this.getDmFormat = function(type) {\n        return rcmail.env.dmFormats[type === undefined ? \"moment\" : type];\n    };\n\n    /**\n     * Return the user language as specified in user settings.\n     *\n     * @returns {string}\n     */\n    this.getLanguage = function() {\n        return this.language;\n    };\n\n    /**\n     * Returns the Roundcube url. The url always includes a trailing slash.\n     */\n    this.getUrl = function() {\n        const url = window.location.protocol + \"//\" + window.location.host + window.location.pathname;\n        return url + (url.substr(-1) == \"/\" ? \"\" : \"/\");\n    };\n\n    /**\n     * Returns the value of a parameter in a url. If url is not specified, it will use the current window url.\n     *\n     * @param {string} parameterName\n     * @param {string|undefined} url\n     * @returns {string}\n     */\n    this.getUrlParameter = function(parameterName, url = undefined) {\n        const match = RegExp('[?&]' + parameterName + '=([^&]*)').exec(url === undefined ? window.location.search : url);\n        return match && decodeURIComponent(match[1].replace(/\\+/g, ' '));\n    };\n\n    /**\n     * Returns true if the current skin is mobile, false otherwise.\n     *\n     * @returns {Boolean}\n     */\n    this.mobile = function() {\n        return rcmail.env.xskin_type !== undefined && rcmail.env.xskin_type == \"mobile\";\n    };\n\n    /**\n     * Html-encodes a string.\n     *\n     * @param {string} html\n     * @returns {string}\n     */\n    this.htmlEncode = function(html) {\n        return document.createElement(\"a\").appendChild(document.createTextNode(html)).parentNode.innerHTML;\n    };\n\n    /**\n     * Sleep function for testing purposes.\n     *\n     * @param {int} duration\n     * @returns {undefined}\n     */\n    this.sleep = function(duration) {\n        const now = new Date().getTime();\n        while(new Date().getTime() < now + duration) {}\n    };\n\n    /**\n     * Returns true if Roundcube runs in a cPanel iframe, false otherwise.\n     *\n     * @returns {Boolean}\n     */\n    this.isCpanel = function() {\n        return window.location.pathname.indexOf(\"/cpsess\") != -1;\n    };\n\n    this.replaceUrlParam = function(name, value) {\n        let str = location.search;\n        if (new RegExp(\"[&?]\"+name+\"([=&].+)?$\").test(str)) {\n            str = str.replace(new RegExp(\"(?:[&?])\"+name+\"[^&]*\", \"g\"), \"\");\n        }\n        str += \"&\";\n        str += name + \"=\" + value;\n        str = \"?\" + str.slice(1);\n        return str + location.hash;\n    };\n\n    /**\n     * Creates a random url-safe 32 chracter code..\n     * @returns {string}\n     */\n    this.getRandomCode = function() {\n        let code = \"\";\n        const characters = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n\n        for (const i = 0; i < 32; i++) {\n            code += characters.charAt(Math.floor(Math.random() * characters.length));\n        }\n\n        return code;\n    };\n\n    /**\n     * This is a simple replacement for under-button popups that are dynamically created. Larry's UI.toggle_popup\n     * doesn't exist in elastic, and elastic's popup system doesn't work well with dynamically created angular\n     * elements. This function works in both larry and elastic. It should be used only for popups that can't be created\n     * using the standard way, since it has some restrictions: the popups reside under the button and are not moved\n     * to the root of the html, so they might not work across containers and the target's parent should be set to\n     * relative position. There's a document onclick event registered at the top of this file that closes the popups\n     * when document is clicked.\n     *\n     * @param id\n     * @param event\n     * @returns {boolean}\n     */\n    this.showPopup = function(id, event) {\n        event.stopPropagation();\n\n        const box = $(\"#\" + id);\n\n        // hide popup if it's visible\n        if (box.is(\":visible\")) {\n            box.hide();\n            return false;\n        }\n\n        // hide all other popups\n        $(\".xpopup\").hide();\n\n        // hide elastic popovers\n        const element = $(\".popover\");\n        if (typeof element.popover == \"function\") {\n            element.popover(\"hide\");\n        }\n\n        // add classes and events to box\n        if (!box.hasClass(\"initialized\")) {\n            // if the box is a popup, don't hide when clicking the menu shown on that box (e.g. calendar event preview)\n            box.on(\"mousedown\", function(event) { event.stopPropagation(); });\n            // hide the menu on mouse up instead of down so that any angular ng-click events have the time to execute\n            // before the box is hidden. When it's hidden angular events won't execute. Use fadeout to give it a bit\n            // more time and make sure.\n            box.on(\"mouseup\", function(/*event*/) { box.fadeOut(300); });\n            box.addClass(\"xpopup popupmenu initialized\");\n        }\n\n        // position and show popup (only on larry, elastic does all this automatically)\n        if ($(\"body\").hasClass(\"xlarry\")) {\n            const target = $(event.target);\n            let pos = target.position();\n            box.css({ left: pos.left, top: pos.top + target.outerHeight() + 5 });\n            box.fadeIn(200);\n        }\n\n        return false\n    };\n\n    /**\n     * A replacement for larry's UI.toggle_popup which makes our code work on both RC 1.1 and 1.0 (which doesn't\n     * have toggle_popup.)\n     *\n     * @param {string} id\n     * @param {object} event\n     * @returns {undefined}\n     */\n    this.UI_popup = function(id, event) {\n        if (typeof UI.toggle_popup !== \"undefined\") {\n            UI.toggle_popup(id, event);\n        } else {\n            UI.show_popup(id, event);\n        }\n    };\n\n    this.ajaxSuccess = function(response, showError) {\n        if (response.status !== undefined &&\n            response.status === 200 &&\n            response.data.success !== undefined &&\n            response.data.success\n        ) {\n            return true;\n        }\n\n        // show error box only if status is 200; on other statuses, the error box will be shown automatically\n        if ((showError === undefined || showError === true) &&\n            response.status !== undefined &&\n            response.status === 200\n        ) {\n            const message = response.data.errorMessage !== undefined && response.data.errorMessage ?\n                response.data.errorMessage :\n                \"This operation cannot be completed due to server error. (5549)\";\n\n            rcmail.display_message(message, 'error');\n        }\n\n        return false;\n    };\n\n    this.createCrcTable = function(){\n        let c;\n        let crcTable = [];\n        for (const n = 0; n < 256; n++){\n            c = n;\n            for(const k =0; k < 8; k++){\n                c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n            }\n            crcTable[n] = c;\n        }\n\n        return crcTable;\n    };\n\n    this.crc32 = function(str) {\n        if (!this.crcTable) {\n            this.crcTable = this.createCrcTable();\n        }\n        let crc = 0 ^ (-1);\n\n        for (const i = 0; i < str.length; i++ ) {\n            crc = (crc >>> 8) ^ this.crcTable[(crc ^ str.charCodeAt(i)) & 0xFF];\n        }\n\n        return (crc ^ (-1)) >>> 0;\n    };\n\n    /**\n     * Provides a simple email validation. Since there's so much controversy on how to properly validate emails, we're\n     * using just a simple check without any frills.\n     * @param email\n     * @returns {boolean}\n     */\n    this.isValidEmail = function(email) {\n        return /\\S+@\\S+\\.\\S+/.test(email);\n    };\n\n    /**\n     * Hide all elastic popovers that were created using rcp plugins (they include an xpopup element.) We don't hide\n     * all the popovers, only the ones we create, otherwise it'll be impossible to use scrollbars on selects and other\n     * scrolling elements.\n     * The elastic popovers don't get hidden when the user clicks outside them, on the document. When a popover is\n     * initiated from a popup window that does get hidden by clicking on the document (like the calendar event preview,)\n     * it stays open even though the preview is closed by the document click. Need to close the popovers when clicking\n     * on the document.\n     */\n    this.hidePopovers = function() {\n        const element = $(\".popover\");\n        if (element.length && typeof element.popover == \"function\" && element.find(\".xpopup\").length) {\n            element.popover('hide');\n        }\n    }\n};\n\n/**\n * Remove element classes with wildcard matching. Optionally add classes:\n * $('#foo').alterClass('foo-* bar-*', 'foobar');\n */\n// (function($) {\n//     $.fn.alterClass = function (removals, additions) {\n//         var self = this;\n//\n//         if (removals.indexOf('*') === -1) {\n//             // Use native jQuery methods if there is no wildcard matching\n//             self.removeClass(removals);\n//             return !additions ? self : self.addClass( additions );\n//         }\n//\n//         var patt = new RegExp('\\\\s' +\n//             removals.\n//                 replace(/\\*/g, '[A-Za-z0-9-_]+').\n//                 split(' ').\n//                 join('\\\\s|\\\\s') +\n//             '\\\\s', 'g');\n//\n//         self.each(function (i, it) {\n//             var cn = ' ' + it.className + ' ';\n//             while (patt.test(cn)) {\n//                 cn = cn.replace(patt, ' ');\n//             }\n//             it.className = $.trim(cn);\n//         });\n//\n//         return !additions ? self : self.addClass(additions);\n//     };\n// })(jQuery);\n\n(function($) {\n    $.fn.alterClass = function (removals, additions) {\n        if (removals.indexOf('*') === -1) {\n            // Use native jQuery methods if there is no wildcard matching\n            this.removeClass(removals);\n            return !additions ? this : this.addClass(additions);\n        }\n\n        const pat = new RegExp('\\\\s' + removals.replace(/\\*/g, '[A-Za-z0-9-_]+').split(' ').join('\\\\s|\\\\s') + '\\\\s', 'g');\n\n        this.each(function (i, it) {\n            let cn = ' ' + it.className + ' ';\n\n            while (pat.test(cn)) {\n                cn = cn.replace(pat, ' ');\n            }\n\n            it.className = $.trim(cn); \n        });\n\n        return !additions ? this : this.addClass(additions);\n    };\n})(jQuery);\n\n/**\n * Provides a listener for attribute changes on an element.\n *\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n    let MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;\n\n    $.fn.attrChange = function(callback) {\n        if (MutationObserver) {\n            const options = {\n                subtree: false,\n                attributes: true\n            };\n\n            const observer = new MutationObserver(function(mutations) {\n                mutations.forEach(function(e) {\n                    callback.call(e.target, e.attributeName);\n                });\n            });\n\n            return this.each(function() {\n                observer.observe(this, options);\n            });\n        }\n    };\n})(jQuery);\n\n\n/**\n * The right sidebar that allows plugins to display their content in boxes.\n */\nfunction xsidebarLarry() {\n    this.initialized = false;\n    this.splitter = false;\n\n    /**\n     * Initializes the sidebar.\n     *\n     * @returns {undefined}\n     */\n    this.initialize = function() {\n        this.sidebar = $(\"#xsidebar\");\n\n        if (xframework.mobile() || !this.sidebar.length || this.initialized) {\n            return;\n        }\n\n        $('#xsidebar-inner').sortable({\n            delay: 100,\n            distance: 10,\n            placeholder: \"placeholder\",\n            stop: function (/*event, ui*/) {\n                let order = [];\n                $(\"#xsidebar .box-wrap\").each(function() {\n                    order.push($(this).attr(\"data-name\"));\n                });\n                rcmail.save_pref({ name: \"xsidebar_order\", value: order.join(\",\") });\n            }\n        });\n\n        this.mainscreen = $(\"#mainscreen\");\n        this.mainscreencontent = $(\"#mainscreencontent\");\n\n        // add a class to the container holding the hide/show button so the css can make some space for the button\n        $(\"#messagesearchtools\").addClass(\"xsidebar-wrap\");\n\n        this.splitter = $('<div>')\n            .attr('id', 'xsidebar-splitter')\n            .attr('unselectable', 'on')\n            .attr('role', 'presentation')\n            .addClass(\"splitter splitter-v\")\n            .appendTo(\"#mainscreen\")\n            .mousedown(function(e) { xsidebar.onSplitterDragStart(e); });\n\n        // size and visibility are saved in a cookie instead of backend preferences because we want them to be\n        // browser-specific--users can use RC on different divices with different screen size\n        this.setSize(this.validateSize(window.UI ? window.UI.get_pref(\"xsidebar-size\") : 250));\n        let sidebarVisible = window.UI.get_pref(\"xsidebar-visible\");\n\n        if (sidebarVisible === undefined && rcmail.env.xsidebarVisible !== undefined) {\n            sidebarVisible = !!rcmail.env.xsidebarVisible;\n        }\n\n\n        if (sidebarVisible === undefined || sidebarVisible) {\n            this.show();\n        } else {\n            this.hide();\n        }\n\n        $(document)\n            .on('mousemove.#mainscreen', function(e) { xsidebar.onSplitterDrag(e); })\n            .on('mouseup.#mainscreen', function(e) { xsidebar.onSplitterDragStop(e); });\n\n        this.initialized = true;\n    };\n\n    this.isVisible = function() {\n        return $(\"body\").hasClass(\"xsidebar-visible\");\n    };\n\n    this.show = function() {\n        $(\"body\").addClass(\"xsidebar-visible\");\n    };\n\n    this.hide = function() {\n        $(\"body\").removeClass(\"xsidebar-visible\");\n        this.mainscreencontent.css(\"width\", \"\").css(\"right\", \"0px\");\n    };\n\n    this.validateSize = function(size) {\n        if (size == undefined) {\n            return 250;\n        }\n\n        // don't allow the sidebar size to be larger than 50% of the screen\n        if (size > this.mainscreen.width() / 2) {\n            return this.mainscreen.width() / 2;\n        }\n\n        if (size < 150) {\n            return 150;\n        }\n\n        return size;\n    };\n\n    this.setSize = function(size) {\n        size = size == undefined ? xsidebar.sidebar.width() : size;\n        this.sidebar.width(size);\n        this.splitter.css(\"right\", size + \"px\");\n        this.mainscreencontent.css(\"right\", (size + 12) + \"px\");\n    };\n\n    this.saveVisibility = function() {\n        if (window.UI) {\n            window.UI.save_pref(\"xsidebar-visible\", $(\"body\").hasClass(\"xsidebar-visible\") ? 1 : 0);\n        }\n    };\n\n    this.toggle = function() {\n        if (this.isVisible()) {\n            this.hide();\n        } else {\n            this.show();\n            this.setSize();\n        }\n\n        this.saveVisibility();\n    };\n\n    this.onSplitterDragStart = function(/*event*/)\n    {\n        // the preview iframe intercepts the drag event if the mouse goes over it, overlay it with a div\n        $(\"#mailpreviewframe\").append($(\"<div>\").attr(\"id\", \"xsidebar-preview-frame-overlay\"));\n\n        if (bw.konq || bw.chrome || bw.safari) {\n            document.body.style.webkitUserSelect = 'none';\n        }\n\n        this.draggingSplitter = true;\n    };\n\n    this.onSplitterDrag = function(event)\n    {\n        if (!this.draggingSplitter) {\n            return;\n        }\n\n        this.setSize(this.mainscreen.width() - event.pageX);\n    };\n\n    this.onSplitterDragStop = function(event)\n    {\n        if (!this.draggingSplitter) {\n            return;\n        }\n\n        $(\"#xsidebar-preview-frame-overlay\").remove();\n\n        if (bw.konq || bw.chrome || bw.safari) {\n            document.body.style.webkitUserSelect = 'auto';\n        }\n\n        this.draggingSplitter = false;\n        this.setSize(this.validateSize(this.mainscreen.width() - event.pageX));\n\n        // save size\n        if (window.UI) {\n            window.UI.save_pref(\"xsidebar-size\", this.sidebar.width());\n        }\n    };\n\n    /**\n     * Toggles the visibility of a sidebar box.\n     *\n     * @param {string} id\n     * @param {object} element\n     * @returns {undefined}\n     */\n    this.toggleBox = function(id, element) {\n        const parent = $(element).parents(\".box-wrap\");\n        if (parent.hasClass(\"collapsed\")) {\n            parent.find(\".box-content\").slideDown(200, function() {\n                parent.removeClass(\"collapsed\");\n                xsidebar.saveToggleBox();\n            });\n        } else {\n            parent.find(\".box-content\").slideUp(200, function() {\n                parent.addClass(\"collapsed\");\n                xsidebar.saveToggleBox();\n            });\n        }\n    };\n\n    this.saveToggleBox = function() {\n        let collapsed = [];\n        $(\"#xsidebar .box-wrap\").each(function() {\n            if ($(this).hasClass(\"collapsed\")) {\n                collapsed.push($(this).attr(\"data-name\"));\n            }\n        });\n\n        rcmail.save_pref({ name: \"xsidebar_collapsed\", value: collapsed });\n    };\n}\n\n/**\n * The right sidebar that allows plugins to display their content in boxes.\n */\nfunction xsidebarElastic() {\n    this.initialized = false;\n    this.splitter = false;\n\n    /**\n     * Initializes the sidebar.\n     *\n     * @returns {undefined}\n     */\n    this.initialize = function() {\n        this.sidebar = $(\"#xsidebar\");\n\n        if (!this.sidebar.length || this.initialized) {\n            return;\n        }\n\n        this.initialized = true;\n\n        $('#xsidebar-inner').sortable({\n            delay: 100,\n            distance: 10,\n            placeholder: \"placeholder\",\n            stop: function () {\n                let order = [];\n                $(\"#xsidebar .box-wrap\").each(function() {\n                    order.push($(this).attr(\"data-name\"));\n                });\n                rcmail.save_pref({ name: \"xsidebar_order\", value: order.join(\",\") });\n            }\n        });\n\n        let sidebarVisible = Cookies.get(\"xsidebar-visible\");\n\n        if (sidebarVisible !== undefined) {\n            sidebarVisible = parseInt(sidebarVisible);\n        } else {\n            if (rcmail.env.xsidebarVisible !== undefined) {\n                sidebarVisible = !!rcmail.env.xsidebarVisible;\n            } else {\n                sidebarVisible = true;\n            }\n        }\n\n        if (sidebarVisible) {\n            this.show();\n        }\n    };\n\n    this.isVisible = function() {\n        return $(\"body\").hasClass(\"xsidebar-visible\");\n    };\n\n    this.show = function() {\n        $(\"body\").addClass(\"xsidebar-visible\");\n    };\n\n    this.hide = function() {\n        $(\"body\").removeClass(\"xsidebar-visible\");\n    };\n\n    this.showMobile = function() {\n        $(\"body\").addClass(\"xsidebar-mobile-visible\");\n    };\n\n    this.hideMobile = function() {\n        $(\"body\").removeClass(\"xsidebar-mobile-visible\");\n    };\n\n    this.saveVisibility = function() {\n        Cookies.set(\"xsidebar-visible\", this.isVisible() ? 1 : 0);\n    };\n\n    this.toggle = function() {\n        if (this.isVisible()) {\n            this.hide();\n        } else {\n            this.show();\n        }\n\n        this.saveVisibility();\n    };\n\n    /**\n     * Toggles the visibility of a sidebar box.\n     *\n     * @param {string} id\n     * @param {object} element\n     * @returns {undefined}\n     */\n    this.toggleBox = function(id, element) {\n        const parent = $(element).parents(\".box-wrap\");\n        if (parent.hasClass(\"collapsed\")) {\n            parent.find(\".box-content\").slideDown(200, function() {\n                parent.removeClass(\"collapsed\");\n                xsidebar.saveToggleBox();\n            });\n        } else {\n            parent.find(\".box-content\").slideUp(200, function() {\n                parent.addClass(\"collapsed\");\n                xsidebar.saveToggleBox();\n            });\n        }\n    };\n\n    this.saveToggleBox = function() {\n        let collapsed = [];\n        $(\"#xsidebar .box-wrap\").each(function() {\n            if ($(this).hasClass(\"collapsed\")) {\n                collapsed.push($(this).attr(\"data-name\"));\n            }\n        });\n\n        rcmail.save_pref({ name: \"xsidebar_collapsed\", value: collapsed });\n    };\n}\n\n"]}